(()=>{function xe(e,t){let n=Object.create(null),r=e.split(",");for(let o=0;o<r.length;o++)n[r[o]]=!0;return t?o=>!!n[o.toLowerCase()]:o=>!!n[o]}var _t={};var ae=()=>{},gt=()=>!1;var vt=(e,t)=>{let n=e.indexOf(t);n>-1&&e.splice(n,1)},En=Object.prototype.hasOwnProperty,ce=(e,t)=>En.call(e,t),S=Array.isArray,Z=e=>ke(e)==="[object Map]",yt=e=>ke(e)==="[object Set]";var I=e=>typeof e=="function",ze=e=>typeof e=="string",ge=e=>typeof e=="symbol",q=e=>e!==null&&typeof e=="object",bt=e=>(q(e)||I(e))&&I(e.then)&&I(e.catch),wn=Object.prototype.toString,ke=e=>wn.call(e),qe=e=>ke(e).slice(8,-1),Et=e=>ke(e)==="[object Object]",De=e=>ze(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e;var Ce=e=>{let t=Object.create(null);return n=>t[n]||(t[n]=e(n))},Nn=/-(\w)/g,On=Ce(e=>e.replace(Nn,(t,n)=>n?n.toUpperCase():"")),xn=/\B([A-Z])/g,kn=Ce(e=>e.replace(xn,"-$1").toLowerCase()),wt=Ce(e=>e.charAt(0).toUpperCase()+e.slice(1)),Dn=Ce(e=>e?`on${wt(e)}`:""),Y=(e,t)=>!Object.is(e,t);var mt,Ye=()=>mt||(mt=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});var Cn="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly";var zr=xe(Cn+",async,autofocus,autoplay,controls,default,defer,disabled,hidden,inert,loop,open,required,reversed,scoped,seamless,checked,muted,multiple,selected");var At;function An(e,t=At){t&&t.active&&t.effects.push(e)}function et(){return At}var St=e=>{let t=new Set(e);return t.w=0,t.n=0,t},$t=e=>(e.w&J)>0,Pt=e=>(e.n&J)>0,Sn=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=J},$n=e=>{let{deps:t}=e;if(t.length){let n=0;for(let r=0;r<t.length;r++){let o=t[r];$t(o)&&!Pt(o)?o.delete(e):t[n++]=o,o.w&=~J,o.n&=~J}t.length=n}},Ge=new WeakMap,ve=0,J=1,Je=30,H,ee=Symbol(""),Xe=Symbol(""),ye=class{constructor(t,n=null,r){this.fn=t,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,An(this,r)}run(){if(!this.active)return this.fn();let t=H,n=te;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=H,H=this,te=!0,J=1<<++ve,ve<=Je?Sn(this):Nt(this),this.fn()}finally{ve<=Je&&$n(this),J=1<<--ve,H=this.parent,te=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){H===this?this.deferStop=!0:this.active&&(Nt(this),this.onStop&&this.onStop(),this.active=!1)}};function Nt(e){let{deps:t}=e;if(t.length){for(let n=0;n<t.length;n++)t[n].delete(e);t.length=0}}var te=!0,Rt=[];function Re(){Rt.push(te),te=!1}function Ie(){let e=Rt.pop();te=e===void 0?!0:e}function R(e,t,n){if(te&&H){let r=Ge.get(e);r||Ge.set(e,r=new Map);let o=r.get(n);o||r.set(n,o=St()),Pn(o,void 0)}}function Pn(e,t){let n=!1;ve<=Je?Pt(e)||(e.n|=J,n=!$t(e)):n=!e.has(H),n&&(e.add(H),H.deps.push(e))}function B(e,t,n,r,o,i){let a=Ge.get(e);if(!a)return;let l=[];if(t==="clear")l=[...a.values()];else if(n==="length"&&S(e)){let m=Number(r);a.forEach((d,g)=>{(g==="length"||!ge(g)&&g>=m)&&l.push(d)})}else switch(n!==void 0&&l.push(a.get(n)),t){case"add":S(e)?De(n)&&l.push(a.get("length")):(l.push(a.get(ee)),Z(e)&&l.push(a.get(Xe)));break;case"delete":S(e)||(l.push(a.get(ee)),Z(e)&&l.push(a.get(Xe)));break;case"set":Z(e)&&l.push(a.get(ee));break}let _=void 0;if(l.length===1)l[0]&&Ot(l[0]);else{let m=[];for(let d of l)d&&m.push(...d);Ot(St(m))}}function Ot(e,t){let n=S(e)?e:[...e];for(let r of n)r.computed&&xt(r,t);for(let r of n)r.computed||xt(r,t)}function xt(e,t){(e!==H||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}var Rn=xe("__proto__,__v_isRef,__isVue"),It=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(ge)),kt=In();function In(){let e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...n){let r=x(this);for(let i=0,a=this.length;i<a;i++)R(r,"get",i+"");let o=r[t](...n);return o===-1||o===!1?r[t](...n.map(x)):o}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...n){Re();let r=x(this)[t].apply(this,n);return Ie(),r}}),e}function Mn(e){let t=x(this);return R(t,"has",e),t.hasOwnProperty(e)}var Pe=class{constructor(t=!1,n=!1){this._isReadonly=t,this._shallow=n}get(t,n,r){let o=this._isReadonly,i=this._shallow;if(n==="__v_isReactive")return!o;if(n==="__v_isReadonly")return o;if(n==="__v_isShallow")return i;if(n==="__v_raw"&&r===(o?i?Yn:jt:i?qn:Ft).get(t))return t;let a=S(t);if(!o){if(a&&ce(kt,n))return Reflect.get(kt,n,r);if(n==="hasOwnProperty")return Mn}let l=Reflect.get(t,n,r);return(ge(n)?It.has(n):Rn(n))||(o||R(t,"get",n),i)?l:M(l)?a&&De(n)?l:l.value:q(l)?o?nt(l):ue(l):l}},Qe=class extends Pe{constructor(t=!1){super(!1,t)}set(t,n,r,o){let i=t[n];if(le(i)&&M(i)&&!M(r))return!1;if(!this._shallow&&(!be(r)&&!le(r)&&(i=x(i),r=x(r)),!S(t)&&M(i)&&!M(r)))return i.value=r,!0;let a=S(t)&&De(n)?Number(n)<t.length:ce(t,n),l=Reflect.set(t,n,r,o);return t===x(o)&&(a?Y(r,i)&&B(t,"set",n,r,i):B(t,"add",n,r)),l}deleteProperty(t,n){let r=ce(t,n),o=t[n],i=Reflect.deleteProperty(t,n);return i&&r&&B(t,"delete",n,void 0,o),i}has(t,n){let r=Reflect.has(t,n);return(!ge(n)||!It.has(n))&&R(t,"has",n),r}ownKeys(t){return R(t,"iterate",S(t)?"length":ee),Reflect.ownKeys(t)}},Ze=class extends Pe{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}},Fn=new Qe,jn=new Ze;var tt=e=>e,Me=e=>Reflect.getPrototypeOf(e);function Ve(e,t,n=!1,r=!1){e=e.__v_raw;let o=x(e),i=x(t);n||(Y(t,i)&&R(o,"get",t),R(o,"get",i));let{has:a}=Me(o),l=r?tt:n?ot:rt;if(a.call(o,t))return l(e.get(t));if(a.call(o,i))return l(e.get(i));e!==o&&e.get(t)}function Te(e,t=!1){let n=this.__v_raw,r=x(n),o=x(e);return t||(Y(e,o)&&R(r,"has",e),R(r,"has",o)),e===o?n.has(e):n.has(e)||n.has(o)}function Ae(e,t=!1){return e=e.__v_raw,!t&&R(x(e),"iterate",ee),Reflect.get(e,"size",e)}function Dt(e){e=x(e);let t=x(this);return Me(t).has.call(t,e)||(t.add(e),B(t,"add",e,e)),this}function Ct(e,t){t=x(t);let n=x(this),{has:r,get:o}=Me(n),i=r.call(n,e);i||(e=x(e),i=r.call(n,e));let a=o.call(n,e);return n.set(e,t),i?Y(t,a)&&B(n,"set",e,t,a):B(n,"add",e,t),this}function Vt(e){let t=x(this),{has:n,get:r}=Me(t),o=n.call(t,e);o||(e=x(e),o=n.call(t,e));let i=r?r.call(t,e):void 0,a=t.delete(e);return o&&B(t,"delete",e,void 0,i),a}function Tt(){let e=x(this),t=e.size!==0,n=void 0,r=e.clear();return t&&B(e,"clear",void 0,void 0,n),r}function Se(e,t){return function(r,o){let i=this,a=i.__v_raw,l=x(a),_=t?tt:e?ot:rt;return!e&&R(l,"iterate",ee),a.forEach((m,d)=>r.call(o,_(m),_(d),i))}}function $e(e,t,n){return function(...r){let o=this.__v_raw,i=x(o),a=Z(i),l=e==="entries"||e===Symbol.iterator&&a,_=e==="keys"&&a,m=o[e](...r),d=n?tt:t?ot:rt;return!t&&R(i,"iterate",_?Xe:ee),{next(){let{value:g,done:N}=m.next();return N?{value:g,done:N}:{value:l?[d(g[0]),d(g[1])]:d(g),done:N}},[Symbol.iterator](){return this}}}}function G(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function Ln(){let e={get(i){return Ve(this,i)},get size(){return Ae(this)},has:Te,add:Dt,set:Ct,delete:Vt,clear:Tt,forEach:Se(!1,!1)},t={get(i){return Ve(this,i,!1,!0)},get size(){return Ae(this)},has:Te,add:Dt,set:Ct,delete:Vt,clear:Tt,forEach:Se(!1,!0)},n={get(i){return Ve(this,i,!0)},get size(){return Ae(this,!0)},has(i){return Te.call(this,i,!0)},add:G("add"),set:G("set"),delete:G("delete"),clear:G("clear"),forEach:Se(!0,!1)},r={get(i){return Ve(this,i,!0,!0)},get size(){return Ae(this,!0)},has(i){return Te.call(this,i,!0)},add:G("add"),set:G("set"),delete:G("delete"),clear:G("clear"),forEach:Se(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(i=>{e[i]=$e(i,!1,!1),n[i]=$e(i,!0,!1),t[i]=$e(i,!1,!0),r[i]=$e(i,!0,!0)}),[e,n,t,r]}var[Un,Hn,Bn,Kn]=Ln();function Mt(e,t){let n=t?e?Kn:Bn:e?Hn:Un;return(r,o,i)=>o==="__v_isReactive"?!e:o==="__v_isReadonly"?e:o==="__v_raw"?r:Reflect.get(ce(n,o)&&o in r?n:r,o,i)}var Wn={get:Mt(!1,!1)};var zn={get:Mt(!0,!1)};var Ft=new WeakMap,qn=new WeakMap,jt=new WeakMap,Yn=new WeakMap;function Gn(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Jn(e){return e.__v_skip||!Object.isExtensible(e)?0:Gn(qe(e))}function ue(e){return le(e)?e:Lt(e,!1,Fn,Wn,Ft)}function nt(e){return Lt(e,!0,jn,zn,jt)}function Lt(e,t,n,r,o){if(!q(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;let i=o.get(e);if(i)return i;let a=Jn(e);if(a===0)return e;let l=new Proxy(e,a===2?r:n);return o.set(e,l),l}function fe(e){return le(e)?fe(e.__v_raw):!!(e&&e.__v_isReactive)}function le(e){return!!(e&&e.__v_isReadonly)}function be(e){return!!(e&&e.__v_isShallow)}function x(e){let t=e&&e.__v_raw;return t?x(t):e}var rt=e=>q(e)?ue(e):e,ot=e=>q(e)?nt(e):e;function M(e){return!!(e&&e.__v_isRef===!0)}var Ee=[];function rr(e,...t){}function or(){let e=Ee[Ee.length-1];if(!e)return[];let t=[];for(;e;){let n=t[0];n&&n.vnode===e?n.recurseCount++:t.push({vnode:e,recurseCount:0});let r=e.component&&e.component.parent;e=r&&r.vnode}return t}function ir(e){let t=[];return e.forEach((n,r)=>{t.push(...r===0?[]:[`
`],...sr(n))}),t}function sr({vnode:e,recurseCount:t}){let n=t>0?`... (${t} recursive calls)`:"",r=e.component?e.component.parent==null:!1,o=` at <${Xt(e.component,e.type,r)}`,i=">"+n;return e.props?[o,...ar(e.props),i]:[o+i]}function ar(e){let t=[],n=Object.keys(e);return n.slice(0,3).forEach(r=>{t.push(...Kt(r,e[r]))}),n.length>3&&t.push(" ..."),t}function Kt(e,t,n){return ze(t)?(t=JSON.stringify(t),n?t:[`${e}=${t}`]):typeof t=="number"||typeof t=="boolean"||t==null?n?t:[`${e}=${t}`]:M(t)?(t=Kt(e,x(t.value),!0),n?t:[`${e}=Ref<`,t,">"]):I(t)?[`${e}=fn${t.name?`<${t.name}>`:""}`]:(t=x(t),n?t:[`${e}=`,t])}function re(e,t,n,r){let o;try{o=r?e(...r):e()}catch(i){Wt(i,t,n)}return o}function we(e,t,n,r){if(I(e)){let i=re(e,t,n,r);return i&&bt(i)&&i.catch(a=>{Wt(a,t,n)}),i}let o=[];for(let i=0;i<e.length;i++)o.push(we(e[i],t,n,r));return o}function Wt(e,t,n,r=!0){let o=t?t.vnode:null;if(t){let i=t.parent,a=t.proxy,l=n;for(;i;){let m=i.ec;if(m){for(let d=0;d<m.length;d++)if(m[d](e,a,l)===!1)return}i=i.parent}let _=t.appContext.config.errorHandler;if(_){re(_,null,10,[e,a,l]);return}}cr(e,n,o,r)}function cr(e,t,n,r=!0){console.error(e)}var je=!1,it=!1,F=[],X=0,he=[],K=null,ne=0,lr=Promise.resolve(),zt=null;function ur(e){let t=X+1,n=F.length;for(;t<n;){let r=t+n>>>1,o=F[r],i=Ne(o);i<e||i===e&&o.pre?t=r+1:n=r}return t}function fr(e){(!F.length||!F.includes(e,je&&e.allowRecurse?X+1:X))&&(e.id==null?F.push(e):F.splice(ur(e.id),0,e),qt())}function qt(){!je&&!it&&(it=!0,zt=lr.then(Yt))}function dr(e){S(e)?he.push(...e):(!K||!K.includes(e,e.allowRecurse?ne+1:ne))&&he.push(e),qt()}function pr(e){if(he.length){let t=[...new Set(he)];if(he.length=0,K){K.push(...t);return}for(K=t,K.sort((n,r)=>Ne(n)-Ne(r)),ne=0;ne<K.length;ne++)K[ne]();K=null,ne=0}}var Ne=e=>e.id==null?1/0:e.id,hr=(e,t)=>{let n=Ne(e)-Ne(t);if(n===0){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return n};function Yt(e){it=!1,je=!0,F.sort(hr);let t=ae;try{for(X=0;X<F.length;X++){let n=F[X];n&&n.active!==!1&&re(n,null,14)}}finally{X=0,F.length=0,pr(e),je=!1,zt=null,(F.length||he.length)&&Yt(e)}}var mr=null;var ko=Symbol.for("v-ndc");function _r(e,t){t&&t.pendingBranch?S(e)?t.effects.push(...e):t.effects.push(e):dr(e)}var Fe={};function st(e,t,n){return gr(e,t,n)}function gr(e,t,{immediate:n,deep:r,flush:o,onTrack:i,onTrigger:a}=_t){var l;let _=b=>{rr("Invalid watch source: ",b,"A watch source can only be a getter/effect function, a ref, a reactive object, or an array of these types.")},m=et()===((l=Q)==null?void 0:l.scope)?Q:null,d,g=!1,N=!1;if(M(e)?(d=()=>e.value,g=be(e)):fe(e)?(d=()=>e,r=!0):S(e)?(N=!0,g=e.some(b=>fe(b)||be(b)),d=()=>e.map(b=>{if(M(b))return b.value;if(fe(b))return pe(b);if(I(b))return re(b,m,2)})):I(e)?t?d=()=>re(e,m,2):d=()=>{if(!(m&&m.isUnmounted))return O&&O(),we(e,m,3,[z])}:d=ae,t&&r){let b=d;d=()=>pe(b())}let O,z=b=>{O=p.onStop=()=>{re(b,m,4),O=p.onStop=void 0}},s;if(Jt)if(z=ae,t?n&&we(t,m,3,[d(),N?[]:void 0,z]):d(),o==="sync"){let b=kr();s=b.__watcherHandles||(b.__watcherHandles=[])}else return ae;let c=N?new Array(e.length).fill(Fe):Fe,u=()=>{if(!!p.active)if(t){let b=p.run();(r||g||(N?b.some((V,A)=>Y(V,c[A])):Y(b,c)))&&(O&&O(),we(t,m,3,[b,c===Fe?void 0:N&&c[0]===Fe?[]:c,z]),c=b)}else p.run()};u.allowRecurse=!!t;let f;o==="sync"?f=u:o==="post"?f=()=>Ht(u,m&&m.suspense):(u.pre=!0,m&&(u.id=m.uid),f=()=>fr(u));let p=new ye(d,f);t?n?u():c=p.run():o==="post"?Ht(p.run.bind(p),m&&m.suspense):p.run();let w=()=>{p.stop(),m&&m.scope&&vt(m.scope.effects,p)};return s&&s.push(w),w}function pe(e,t){if(!q(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),M(e))pe(e.value,t);else if(S(e))for(let n=0;n<e.length;n++)pe(e[n],t);else if(yt(e)||Z(e))e.forEach(n=>{pe(n,t)});else if(Et(e))for(let n in e)pe(e[n],t);return e}var Do=Symbol("_leaveCb"),Co=Symbol("_enterCb");function vr(e,t,n=Q,r=!1){if(n){let o=n[e]||(n[e]=[]),i=t.__weh||(t.__weh=(...a)=>{if(n.isUnmounted)return;Re(),br(n);let l=we(t,n,e,a);return Er(),Ie(),l});return r?o.unshift(i):o.push(i),i}}var W=e=>(t,n=Q)=>(!Jt||e==="sp")&&vr(e,(...r)=>t(...r),n),Vo=W("bm"),To=W("m"),Ao=W("bu"),So=W("u"),$o=W("bum"),Po=W("um"),Ro=W("sp"),Io=W("rtg"),Mo=W("rtc");function yr(){return{app:null,config:{isNativeTag:gt,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}var Ut=null;function Gt(e,t,n=!1){let r=Q||mr;if(r||Ut){let o=r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:Ut._context.provides;if(o&&e in o)return o[e];if(arguments.length>1)return n&&I(t)?t.call(r&&r.proxy):t}}var Ht=_r;var Fo=Symbol.for("v-fgt"),jo=Symbol.for("v-txt"),Lo=Symbol.for("v-cmt"),Uo=Symbol.for("v-stc");var Ho=yr();var Q=null;var at,de,Bt="__VUE_INSTANCE_SETTERS__";(de=Ye()[Bt])||(de=Ye()[Bt]=[]),de.push(e=>Q=e),at=e=>{de.length>1?de.forEach(t=>t(e)):de[0](e)};var br=e=>{at(e),e.scope.on()},Er=()=>{Q&&Q.scope.off(),at(null)};var Jt=!1;var wr=/(?:^|[-_])(\w)/g,Nr=e=>e.replace(wr,t=>t.toUpperCase()).replace(/[-_]/g,"");function Or(e,t=!0){return I(e)?e.displayName||e.name:e.name||t&&e.__name}function Xt(e,t,n=!1){let r=Or(t);if(!r&&t.__file){let o=t.__file.match(/([^/\\]+)\.\w+$/);o&&(r=o[1])}if(!r&&e&&e.parent){let o=i=>{for(let a in i)if(i[a]===t)return a};r=o(e.components||e.parent.type.components)||o(e.appContext.components)}return r?Nr(r):n?"App":"Anonymous"}var xr=Symbol.for("v-scx"),kr=()=>{{let e=Gt(xr);return e}};function Qt(){return ct().__VUE_DEVTOOLS_GLOBAL_HOOK__}function ct(){return typeof navigator!="undefined"&&typeof window!="undefined"?window:typeof global!="undefined"?global:{}}var Zt=typeof Proxy=="function";var en="devtools-plugin:setup",tn="plugin:settings:set";var me,lt;function Dr(){var e;return me!==void 0||(typeof window!="undefined"&&window.performance?(me=!0,lt=window.performance):typeof global!="undefined"&&((e=global.perf_hooks)===null||e===void 0?void 0:e.performance)?(me=!0,lt=global.perf_hooks.performance):me=!1),me}function nn(){return Dr()?lt.now():Date.now()}var Le=class{constructor(t,n){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=t,this.hook=n;let r={};if(t.settings)for(let a in t.settings){let l=t.settings[a];r[a]=l.defaultValue}let o=`__vue-devtools-plugin-settings__${t.id}`,i=Object.assign({},r);try{let a=localStorage.getItem(o),l=JSON.parse(a);Object.assign(i,l)}catch(a){}this.fallbacks={getSettings(){return i},setSettings(a){try{localStorage.setItem(o,JSON.stringify(a))}catch(l){}i=a},now(){return nn()}},n&&n.on(tn,(a,l)=>{a===this.plugin.id&&this.fallbacks.setSettings(l)}),this.proxiedOn=new Proxy({},{get:(a,l)=>this.target?this.target.on[l]:(..._)=>{this.onQueue.push({method:l,args:_})}}),this.proxiedTarget=new Proxy({},{get:(a,l)=>this.target?this.target[l]:l==="on"?this.proxiedOn:Object.keys(this.fallbacks).includes(l)?(..._)=>(this.targetQueue.push({method:l,args:_,resolve:()=>{}}),this.fallbacks[l](..._)):(..._)=>new Promise(m=>{this.targetQueue.push({method:l,args:_,resolve:m})})})}async setRealTarget(t){this.target=t;for(let n of this.onQueue)this.target.on[n.method](...n.args);for(let n of this.targetQueue)n.resolve(await this.target[n.method](...n.args))}};function rn(e,t){let n=e,r=ct(),o=Qt(),i=Zt&&n.enableEarlyProxy;if(o&&(r.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__||!i))o.emit(en,e,t);else{let a=i?new Le(n,o):null;(r.__VUE_DEVTOOLS_PLUGINS__=r.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:n,setupFn:t,proxy:a}),a&&t(a.proxiedTarget)}}var Cr="store";function oe(e,t){Object.keys(e).forEach(function(n){return t(e[n],n)})}function ln(e){return e!==null&&typeof e=="object"}function Vr(e){return e&&typeof e.then=="function"}function j(e,t){if(!e)throw new Error("[vuex] "+t)}function Tr(e,t){return function(){return e(t)}}function un(e,t,n){return t.indexOf(e)<0&&(n&&n.prepend?t.unshift(e):t.push(e)),function(){var r=t.indexOf(e);r>-1&&t.splice(r,1)}}function fn(e,t){e._actions=Object.create(null),e._mutations=Object.create(null),e._wrappedGetters=Object.create(null),e._modulesNamespaceMap=Object.create(null);var n=e.state;He(e,n,[],e._modules.root,!0),dt(e,n,t)}function dt(e,t,n){var r=e._state;e.getters={},e._makeLocalGettersCache=Object.create(null);var o=e._wrappedGetters,i={};oe(o,function(a,l){i[l]=Tr(a,e),Object.defineProperty(e.getters,l,{get:function(){return i[l]()},enumerable:!0})}),e._state=ue({data:t}),e.strict&&Rr(e),r&&n&&e._withCommit(function(){r.data=null})}function He(e,t,n,r,o){var i=!n.length,a=e._modules.getNamespace(n);if(r.namespaced&&(e._modulesNamespaceMap[a]&&console.error("[vuex] duplicate namespace "+a+" for the namespaced module "+n.join("/")),e._modulesNamespaceMap[a]=r),!i&&!o){var l=pt(t,n.slice(0,-1)),_=n[n.length-1];e._withCommit(function(){_ in l&&console.warn('[vuex] state field "'+_+'" was overridden by a module with the same name at "'+n.join(".")+'"'),l[_]=r.state})}var m=r.context=Ar(e,a,n);r.forEachMutation(function(d,g){var N=a+g;Sr(e,N,d,m)}),r.forEachAction(function(d,g){var N=d.root?g:a+g,O=d.handler||d;$r(e,N,O,m)}),r.forEachGetter(function(d,g){var N=a+g;Pr(e,N,d,m)}),r.forEachChild(function(d,g){He(e,t,n.concat(g),d,o)})}function Ar(e,t,n){var r=t==="",o={dispatch:r?e.dispatch:function(i,a,l){var _=Ue(i,a,l),m=_.payload,d=_.options,g=_.type;if((!d||!d.root)&&(g=t+g,!e._actions[g])){console.error("[vuex] unknown local action type: "+_.type+", global type: "+g);return}return e.dispatch(g,m)},commit:r?e.commit:function(i,a,l){var _=Ue(i,a,l),m=_.payload,d=_.options,g=_.type;if((!d||!d.root)&&(g=t+g,!e._mutations[g])){console.error("[vuex] unknown local mutation type: "+_.type+", global type: "+g);return}e.commit(g,m,d)}};return Object.defineProperties(o,{getters:{get:r?function(){return e.getters}:function(){return dn(e,t)}},state:{get:function(){return pt(e.state,n)}}}),o}function dn(e,t){if(!e._makeLocalGettersCache[t]){var n={},r=t.length;Object.keys(e.getters).forEach(function(o){if(o.slice(0,r)===t){var i=o.slice(r);Object.defineProperty(n,i,{get:function(){return e.getters[o]},enumerable:!0})}}),e._makeLocalGettersCache[t]=n}return e._makeLocalGettersCache[t]}function Sr(e,t,n,r){var o=e._mutations[t]||(e._mutations[t]=[]);o.push(function(a){n.call(e,r.state,a)})}function $r(e,t,n,r){var o=e._actions[t]||(e._actions[t]=[]);o.push(function(a){var l=n.call(e,{dispatch:r.dispatch,commit:r.commit,getters:r.getters,state:r.state,rootGetters:e.getters,rootState:e.state},a);return Vr(l)||(l=Promise.resolve(l)),e._devtoolHook?l.catch(function(_){throw e._devtoolHook.emit("vuex:error",_),_}):l})}function Pr(e,t,n,r){if(e._wrappedGetters[t]){console.error("[vuex] duplicate getter key: "+t);return}e._wrappedGetters[t]=function(i){return n(r.state,r.getters,i.state,i.getters)}}function Rr(e){st(function(){return e._state.data},function(){j(e._committing,"do not mutate vuex store state outside mutation handlers.")},{deep:!0,flush:"sync"})}function pt(e,t){return t.reduce(function(n,r){return n[r]},e)}function Ue(e,t,n){return ln(e)&&e.type&&(n=t,t=e,e=e.type),j(typeof e=="string","expects string as the type, but found "+typeof e+"."),{type:e,payload:t,options:n}}var Ir="vuex bindings",on="vuex:mutations",ut="vuex:actions",_e="vuex",Mr=0;function Fr(e,t){rn({id:"org.vuejs.vuex",app:e,label:"Vuex",homepage:"https://next.vuex.vuejs.org/",logo:"https://vuejs.org/images/icons/favicon-96x96.png",packageName:"vuex",componentStateTypes:[Ir]},function(n){n.addTimelineLayer({id:on,label:"Vuex Mutations",color:sn}),n.addTimelineLayer({id:ut,label:"Vuex Actions",color:sn}),n.addInspector({id:_e,label:"Vuex",icon:"storage",treeFilterPlaceholder:"Filter stores..."}),n.on.getInspectorTree(function(r){if(r.app===e&&r.inspectorId===_e)if(r.filter){var o=[];_n(o,t._modules.root,r.filter,""),r.rootNodes=o}else r.rootNodes=[mn(t._modules.root,"")]}),n.on.getInspectorState(function(r){if(r.app===e&&r.inspectorId===_e){var o=r.nodeId;dn(t,o),r.state=Ur(Br(t._modules,o),o==="root"?t.getters:t._makeLocalGettersCache,o)}}),n.on.editInspectorState(function(r){if(r.app===e&&r.inspectorId===_e){var o=r.nodeId,i=r.path;o!=="root"&&(i=o.split("/").filter(Boolean).concat(i)),t._withCommit(function(){r.set(t._state.data,i,r.state.value)})}}),t.subscribe(function(r,o){var i={};r.payload&&(i.payload=r.payload),i.state=o,n.notifyComponentUpdate(),n.sendInspectorTree(_e),n.sendInspectorState(_e),n.addTimelineEvent({layerId:on,event:{time:Date.now(),title:r.type,data:i}})}),t.subscribeAction({before:function(r,o){var i={};r.payload&&(i.payload=r.payload),r._id=Mr++,r._time=Date.now(),i.state=o,n.addTimelineEvent({layerId:ut,event:{time:r._time,title:r.type,groupId:r._id,subtitle:"start",data:i}})},after:function(r,o){var i={},a=Date.now()-r._time;i.duration={_custom:{type:"duration",display:a+"ms",tooltip:"Action duration",value:a}},r.payload&&(i.payload=r.payload),i.state=o,n.addTimelineEvent({layerId:ut,event:{time:Date.now(),title:r.type,groupId:r._id,subtitle:"end",data:i}})}})})}var sn=8702998,jr=6710886,Lr=16777215,pn={label:"namespaced",textColor:Lr,backgroundColor:jr};function hn(e){return e&&e!=="root"?e.split("/").slice(-2,-1)[0]:"Root"}function mn(e,t){return{id:t||"root",label:hn(t),tags:e.namespaced?[pn]:[],children:Object.keys(e._children).map(function(n){return mn(e._children[n],t+n+"/")})}}function _n(e,t,n,r){r.includes(n)&&e.push({id:r||"root",label:r.endsWith("/")?r.slice(0,r.length-1):r||"Root",tags:t.namespaced?[pn]:[]}),Object.keys(t._children).forEach(function(o){_n(e,t._children[o],n,r+o+"/")})}function Ur(e,t,n){t=n==="root"?t:t[n];var r=Object.keys(t),o={state:Object.keys(e.state).map(function(a){return{key:a,editable:!0,value:e.state[a]}})};if(r.length){var i=Hr(t);o.getters=Object.keys(i).map(function(a){return{key:a.endsWith("/")?hn(a):a,editable:!1,value:ft(function(){return i[a]})}})}return o}function Hr(e){var t={};return Object.keys(e).forEach(function(n){var r=n.split("/");if(r.length>1){var o=t,i=r.pop();r.forEach(function(a){o[a]||(o[a]={_custom:{value:{},display:a,tooltip:"Module",abstract:!0}}),o=o[a]._custom.value}),o[i]=ft(function(){return e[n]})}else t[n]=ft(function(){return e[n]})}),t}function Br(e,t){var n=t.split("/").filter(function(r){return r});return n.reduce(function(r,o,i){var a=r[o];if(!a)throw new Error('Missing module "'+o+'" for path "'+t+'".');return i===n.length-1?a:a._children},t==="root"?e:e.root._children)}function ft(e){try{return e()}catch(t){return t}}var L=function(t,n){this.runtime=n,this._children=Object.create(null),this._rawModule=t;var r=t.state;this.state=(typeof r=="function"?r():r)||{}},gn={namespaced:{configurable:!0}};gn.namespaced.get=function(){return!!this._rawModule.namespaced};L.prototype.addChild=function(t,n){this._children[t]=n};L.prototype.removeChild=function(t){delete this._children[t]};L.prototype.getChild=function(t){return this._children[t]};L.prototype.hasChild=function(t){return t in this._children};L.prototype.update=function(t){this._rawModule.namespaced=t.namespaced,t.actions&&(this._rawModule.actions=t.actions),t.mutations&&(this._rawModule.mutations=t.mutations),t.getters&&(this._rawModule.getters=t.getters)};L.prototype.forEachChild=function(t){oe(this._children,t)};L.prototype.forEachGetter=function(t){this._rawModule.getters&&oe(this._rawModule.getters,t)};L.prototype.forEachAction=function(t){this._rawModule.actions&&oe(this._rawModule.actions,t)};L.prototype.forEachMutation=function(t){this._rawModule.mutations&&oe(this._rawModule.mutations,t)};Object.defineProperties(L.prototype,gn);var ie=function(t){this.register([],t,!1)};ie.prototype.get=function(t){return t.reduce(function(n,r){return n.getChild(r)},this.root)};ie.prototype.getNamespace=function(t){var n=this.root;return t.reduce(function(r,o){return n=n.getChild(o),r+(n.namespaced?o+"/":"")},"")};ie.prototype.update=function(t){vn([],this.root,t)};ie.prototype.register=function(t,n,r){var o=this;r===void 0&&(r=!0),yn(t,n);var i=new L(n,r);if(t.length===0)this.root=i;else{var a=this.get(t.slice(0,-1));a.addChild(t[t.length-1],i)}n.modules&&oe(n.modules,function(l,_){o.register(t.concat(_),l,r)})};ie.prototype.unregister=function(t){var n=this.get(t.slice(0,-1)),r=t[t.length-1],o=n.getChild(r);if(!o){console.warn("[vuex] trying to unregister module '"+r+"', which is not registered");return}!o.runtime||n.removeChild(r)};ie.prototype.isRegistered=function(t){var n=this.get(t.slice(0,-1)),r=t[t.length-1];return n?n.hasChild(r):!1};function vn(e,t,n){if(yn(e,n),t.update(n),n.modules)for(var r in n.modules){if(!t.getChild(r)){console.warn("[vuex] trying to add a new module '"+r+"' on hot reloading, manual reload is needed");return}vn(e.concat(r),t.getChild(r),n.modules[r])}}var an={assert:function(e){return typeof e=="function"},expected:"function"},Kr={assert:function(e){return typeof e=="function"||typeof e=="object"&&typeof e.handler=="function"},expected:'function or object with "handler" function'},cn={getters:an,mutations:an,actions:Kr};function yn(e,t){Object.keys(cn).forEach(function(n){if(!!t[n]){var r=cn[n];oe(t[n],function(o,i){j(r.assert(o),Wr(e,n,i,o,r.expected))})}})}function Wr(e,t,n,r,o){var i=t+" should be "+o+' but "'+t+"."+n+'"';return e.length>0&&(i+=' in module "'+e.join(".")+'"'),i+=" is "+JSON.stringify(r)+".",i}function bn(e){return new P(e)}var P=function e(t){var n=this;t===void 0&&(t={}),j(typeof Promise!="undefined","vuex requires a Promise polyfill in this browser."),j(this instanceof e,"store must be called with the new operator.");var r=t.plugins;r===void 0&&(r=[]);var o=t.strict;o===void 0&&(o=!1);var i=t.devtools;this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new ie(t),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._makeLocalGettersCache=Object.create(null),this._devtools=i;var a=this,l=this,_=l.dispatch,m=l.commit;this.dispatch=function(N,O){return _.call(a,N,O)},this.commit=function(N,O,z){return m.call(a,N,O,z)},this.strict=o;var d=this._modules.root.state;He(this,d,[],this._modules.root),dt(this,d),r.forEach(function(g){return g(n)})},ht={state:{configurable:!0}};P.prototype.install=function(t,n){t.provide(n||Cr,this),t.config.globalProperties.$store=this;var r=this._devtools!==void 0?this._devtools:!0;r&&Fr(t,this)};ht.state.get=function(){return this._state.data};ht.state.set=function(e){j(!1,"use store.replaceState() to explicit replace store state.")};P.prototype.commit=function(t,n,r){var o=this,i=Ue(t,n,r),a=i.type,l=i.payload,_=i.options,m={type:a,payload:l},d=this._mutations[a];if(!d){console.error("[vuex] unknown mutation type: "+a);return}this._withCommit(function(){d.forEach(function(N){N(l)})}),this._subscribers.slice().forEach(function(g){return g(m,o.state)}),_&&_.silent&&console.warn("[vuex] mutation type: "+a+". Silent option has been removed. Use the filter functionality in the vue-devtools")};P.prototype.dispatch=function(t,n){var r=this,o=Ue(t,n),i=o.type,a=o.payload,l={type:i,payload:a},_=this._actions[i];if(!_){console.error("[vuex] unknown action type: "+i);return}try{this._actionSubscribers.slice().filter(function(d){return d.before}).forEach(function(d){return d.before(l,r.state)})}catch(d){console.warn("[vuex] error in before action subscribers: "),console.error(d)}var m=_.length>1?Promise.all(_.map(function(d){return d(a)})):_[0](a);return new Promise(function(d,g){m.then(function(N){try{r._actionSubscribers.filter(function(O){return O.after}).forEach(function(O){return O.after(l,r.state)})}catch(O){console.warn("[vuex] error in after action subscribers: "),console.error(O)}d(N)},function(N){try{r._actionSubscribers.filter(function(O){return O.error}).forEach(function(O){return O.error(l,r.state,N)})}catch(O){console.warn("[vuex] error in error action subscribers: "),console.error(O)}g(N)})})};P.prototype.subscribe=function(t,n){return un(t,this._subscribers,n)};P.prototype.subscribeAction=function(t,n){var r=typeof t=="function"?{before:t}:t;return un(r,this._actionSubscribers,n)};P.prototype.watch=function(t,n,r){var o=this;return j(typeof t=="function","store.watch only accepts a function."),st(function(){return t(o.state,o.getters)},n,Object.assign({},r))};P.prototype.replaceState=function(t){var n=this;this._withCommit(function(){n._state.data=t})};P.prototype.registerModule=function(t,n,r){r===void 0&&(r={}),typeof t=="string"&&(t=[t]),j(Array.isArray(t),"module path must be a string or an Array."),j(t.length>0,"cannot register the root module by using registerModule."),this._modules.register(t,n),He(this,this.state,t,this._modules.get(t),r.preserveState),dt(this,this.state)};P.prototype.unregisterModule=function(t){var n=this;typeof t=="string"&&(t=[t]),j(Array.isArray(t),"module path must be a string or an Array."),this._modules.unregister(t),this._withCommit(function(){var r=pt(n.state,t.slice(0,-1));delete r[t[t.length-1]]}),fn(this)};P.prototype.hasModule=function(t){return typeof t=="string"&&(t=[t]),j(Array.isArray(t),"module path must be a string or an Array."),this._modules.isRegistered(t)};P.prototype.hotUpdate=function(t){this._modules.update(t),fn(this,!0)};P.prototype._withCommit=function(t){var n=this._committing;this._committing=!0,t(),this._committing=n};Object.defineProperties(P.prototype,ht);var ci=Ke(function(e,t){var n={};return Oe(t)||console.error("[vuex] mapState: mapper parameter must be either an Array or an Object"),Be(t).forEach(function(r){var o=r.key,i=r.val;n[o]=function(){var l=this.$store.state,_=this.$store.getters;if(e){var m=We(this.$store,"mapState",e);if(!m)return;l=m.context.state,_=m.context.getters}return typeof i=="function"?i.call(this,l,_):l[i]},n[o].vuex=!0}),n}),li=Ke(function(e,t){var n={};return Oe(t)||console.error("[vuex] mapMutations: mapper parameter must be either an Array or an Object"),Be(t).forEach(function(r){var o=r.key,i=r.val;n[o]=function(){for(var l=[],_=arguments.length;_--;)l[_]=arguments[_];var m=this.$store.commit;if(e){var d=We(this.$store,"mapMutations",e);if(!d)return;m=d.context.commit}return typeof i=="function"?i.apply(this,[m].concat(l)):m.apply(this.$store,[i].concat(l))}}),n}),ui=Ke(function(e,t){var n={};return Oe(t)||console.error("[vuex] mapGetters: mapper parameter must be either an Array or an Object"),Be(t).forEach(function(r){var o=r.key,i=r.val;i=e+i,n[o]=function(){if(!(e&&!We(this.$store,"mapGetters",e))){if(!(i in this.$store.getters)){console.error("[vuex] unknown getter: "+i);return}return this.$store.getters[i]}},n[o].vuex=!0}),n}),fi=Ke(function(e,t){var n={};return Oe(t)||console.error("[vuex] mapActions: mapper parameter must be either an Array or an Object"),Be(t).forEach(function(r){var o=r.key,i=r.val;n[o]=function(){for(var l=[],_=arguments.length;_--;)l[_]=arguments[_];var m=this.$store.dispatch;if(e){var d=We(this.$store,"mapActions",e);if(!d)return;m=d.context.dispatch}return typeof i=="function"?i.apply(this,[m].concat(l)):m.apply(this.$store,[i].concat(l))}}),n});function Be(e){return Oe(e)?Array.isArray(e)?e.map(function(t){return{key:t,val:t}}):Object.keys(e).map(function(t){return{key:t,val:e[t]}}):[]}function Oe(e){return Array.isArray(e)||ln(e)}function Ke(e){return function(t,n){return typeof t!="string"?(n=t,t=""):t.charAt(t.length-1)!=="/"&&(t+="/"),e(t,n)}}function We(e,t,n){var r=e._modulesNamespaceMap[n];return r||console.error("[vuex] module namespace not found in "+t+"(): "+n),r}frappe.provide("frappe.views");(function(){var e="frappe.desk.doctype.kanban_board.kanban_board.";let t=null;var n=bn({state:{doctype:"",board:{},card_meta:{},cards:[],columns:[],filters_modified:!1,cur_list:{},empty_state:!0},mutations:{update_state(s,c){Object.assign(s,c)}},actions:{init:function(s,c){s.commit("update_state",{empty_state:!0});var u=c.board,f=c.card_meta;c.card_meta=f,c.board=u;var p=c.cards.map(function(b){return r(b,c)}),w=o(u.columns);s.commit("update_state",{doctype:c.doctype,board:u,card_meta:f,cards:p,columns:w,cur_list:c.cur_list,empty_state:!1,wrapper:c.wrapper})},update_cards:function(s,c){var u=s.state,f=c.map(p=>r(p,u)).concat(u.cards).uniqBy(p=>p.name);s.commit("update_state",{cards:f})},add_column:function(s,c){frappe.model.can_create("Custom Field")?n.dispatch("update_column",{col:c,action:"add"}):frappe.msgprint({title:__("Not permitted"),message:__("You are not allowed to create columns"),indicator:"red"})},archive_column:function(s,c){n.dispatch("update_column",{col:c,action:"archive"})},restore_column:function(s,c){n.dispatch("update_column",{col:c,action:"restore"})},update_column:function(s,{col:c,action:u}){var f=s.state.doctype,p=s.state.board;a(f).then(function(w){return i(w,p,c.title,u)}).then(l).then(function(){return m(p.name,c.title,u)}).then(function(w){var b=w.message;s.commit("update_state",{columns:o(b)})},function(w){console.error(w)})},add_card:function(s,{card_title:c,column_title:u}){var f=s.state,p=frappe.model.get_new_doc(f.doctype),w=f.card_meta.title_field,b=f.card_meta.quick_entry,V={};V[w.fieldname]=c,V[f.board.field_name]=u,f.cur_list.filter_area.get().forEach(function(h){h[2]==="="&&(V[h[1]]=h[3])}),$.extend(p,V);let A=r(p,f);A._disable_click=!0;let U=[...f.cards,A],k=p.name;if(s.commit("update_state",{cards:U}),w&&!b)return _(p).then(function(h){let y=h.message,E=f.cards.findIndex(C=>C.name===k),v=r(y,f),D=f.cards.slice();D[E]=v,s.commit("update_state",{cards:D});let T={new:1,name:v.name,colname:y[f.board.field_name]};n.dispatch("update_order_for_single_card",T)});frappe.new_doc(f.doctype,p)},update_card:function(s,c){var u=-1;s.state.cards.forEach(function(p,w){p.name===c.name&&(u=w)});var f=s.state.cards.slice();u!==-1&&f.splice(u,1,c),s.commit("update_state",{cards:f})},update_order_for_single_card:function(s,c){let u=s.state.cards.slice(),f=s.state.columns.slice(),p={},w="";c.new?(w="add_card",p={board_name:s.state.board.name,docname:c.name,colname:c.colname}):(w="update_order_for_single_card",p={board_name:s.state.board.name,docname:c.name,from_colname:c.from_colname,to_colname:c.to_colname,old_index:c.old_index,new_index:c.new_index}),frappe.dom.freeze(),frappe.call({method:e+w,args:p,callback:b=>{let V=b.message,A=[{name:c.name,column:c.to_colname||c.colname}],U=O(A),k=o(V.columns);s.commit("update_state",{cards:U,columns:k}),frappe.dom.unfreeze()}}).fail(function(){s.commit("update_state",{cards:u,columns:f}),frappe.dom.unfreeze()})},update_order:function(s){let c=s.state.cards.slice(),u=s.state.columns.slice(),f={};s.state.wrapper.find(".kanban-column[data-column-value]").each(function(){var p=$(this).data().columnValue;f[p]=[],$(this).find(".kanban-card-wrapper").each(function(){var w=decodeURIComponent($(this).data().name);f[p].push(w)})}),frappe.call({method:e+"update_order",args:{board_name:s.state.board.name,order:f},callback:p=>{var w=p.message[0],b=p.message[1],V=O(b),A=o(w.columns);s.commit("update_state",{cards:V,columns:A})}}).fail(function(){s.commit("update_state",{cards:c,columns:u})})},update_column_order:function(s,c){return frappe.call({method:e+"update_column_order",args:{board_name:s.state.board.name,order:c}}).then(function(u){var f=u.message,p=o(f.columns);s.commit("update_state",{columns:p})})},set_indicator:function(s,{column:c,color:u}){return frappe.call({method:e+"set_indicator",args:{board_name:s.state.board.name,column_name:c.title,indicator:u}}).then(function(f){var p=f.message,w=o(p.columns);s.commit("update_state",{columns:w})})}}});frappe.views.KanbanBoard=function(s){var c={};c.wrapper=s.wrapper,c.cur_list=s.cur_list,c.board_name=s.board_name,c.board_perms=c.cur_list.board_perms,c.update=function(h){s.cards=h,c.wrapper.find(".kanban").length>0&&c.cur_list.start!==0?n.dispatch("update_cards",h):u()};function u(){n.dispatch("init",s),t&&t(),n.watch((h,y)=>h.columns,p),f(),p(),n.watch((h,y)=>h.cur_list,U),t=n.watch((h,y)=>h.columns,U),n.watch((h,y)=>h.empty_state,k),n.dispatch("update_order")}function f(){c.$kanban_board=c.wrapper.find(".kanban"),c.$kanban_board.length===0&&(c.$kanban_board=$(frappe.render_template("kanban_board")),c.$kanban_board.appendTo(c.wrapper)),c.$filter_area=c.cur_list.$page.find(".active-tag-filters"),w(),b()}function p(){c.$kanban_board.find(".kanban-column").not(".add-new-column").remove();var h=n.state.columns;h.filter(d).map(function(y){frappe.views.KanbanBoardColumn(y,c.$kanban_board,c.board_perms)})}function w(){V(),A()}function b(){if(!!c.board_perms.write)var h=new Sortable(c.$kanban_board.get(0),{group:"columns",animation:150,dataIdAttr:"data-column-value",filter:".add-new-column",handle:".kanban-column-title",onEnd:function(){var y=h.toArray();y=y.slice(1),n.dispatch("update_column_order",y)}})}function V(){if(!c.board_perms.write){c.$kanban_board.find(".add-new-column").remove();return}var h=c.$kanban_board.find(".add-new-column"),y=h.find(".compose-column"),E=h.find(".compose-column-form").hide();y.on("click",function(){$(this).hide(),E.show(),E.find("input").focus()}),E.keydown(function(v){if(v.which==13&&(v.preventDefault(),!frappe.request.ajax_count)){var D=E.serializeArray()[0].value,T={title:D.trim()};n.dispatch("add_column",T),E.find("input").val(""),y.show(),E.hide()}}),E.find("input").on("blur",function(){$(this).val(""),y.show(),E.hide()})}function A(){let h=!1,y,E,v=c.$kanban_board[0];v.addEventListener("mousedown",D=>{[".kanban-column .kanban-column-header",".kanban-column .add-card",".kanban-column .kanban-card.new-card-area",".kanban-card-wrapper"].some(C=>D.target.closest(C))||(h=!0,v.classList.add("clickdrag-active"),y=D.pageX-v.offsetLeft,E=v.scrollLeft)}),v.addEventListener("mouseleave",()=>{h=!1,v.classList.remove("clickdrag-active")}),v.addEventListener("mouseup",()=>{h=!1,v.classList.remove("clickdrag-active")}),v.addEventListener("mousemove",D=>{if(!h)return;D.preventDefault();let C=D.pageX-v.offsetLeft-y;v.scrollLeft=E-C})}function U(){var h=n.state.cur_list,y=n.state.columns,E=h.$page.find("[data-list-renderer='Kanban'] .list-row-right").css("margin-right","15px");E.empty();var v=y.filter(function(C){return C.status==="Archived"});if(!!v.length){var D=v.reduce(function(C,se){return C+`<li><a class='option'>" +
					"<span class='ellipsis' style='max-width: 100px; display: inline-block'>" +
					__(b.title) + "</span>" +
					"<button style='float:right;' data-column='" + b.title +
					"' class='btn btn-default btn-xs restore-column text-muted'>"
					+ __('Restore') + "</button></a></li>`},""),T=$("<div class='dropdown pull-right'><a class='text-muted dropdown-toggle' data-toggle='dropdown'><span class='dropdown-text'>"+__("Archived Columns")+"</span><i class='caret'></i></a><ul class='dropdown-menu'>"+D+"</ul></div>");E.html(T),T.find(".dropdown-menu").on("click","button.restore-column",function(){var C=$(this).data().column,se={title:C,status:"Archived"};n.dispatch("restore_column",se)})}}function k(){var h=n.state.empty_state;h?(c.$kanban_board.find(".kanban-column").hide(),c.$kanban_board.find(".kanban-empty-state").show()):(c.$kanban_board.find(".kanban-column").show(),c.$kanban_board.find(".kanban-empty-state").hide())}return u(),c},frappe.views.KanbanBoardColumn=function(s,c,u){var f={},p=[];function w(){b(),A(),V(),n.watch((h,y)=>h.cards,V),U(),k()}function b(){f.$kanban_column=$(frappe.render_template("kanban_column",{title:s.title,doctype:n.state.doctype,indicator:frappe.scrub(s.indicator,"-")})).appendTo(c),f.$kanban_cards=f.$kanban_column.find(".kanban-cards")}function V(){f.$kanban_cards.empty();var h=n.state.cards;p=g(h,s);var y=p.map(v=>v.name),E=s.order;E?(E=JSON.parse(E),p.forEach(function(v){E.indexOf(v.name)===-1&&frappe.views.KanbanBoardCard(v,f.$kanban_cards)}),E.forEach(function(v){!y.includes(v)||frappe.views.KanbanBoardCard(N(v),f.$kanban_cards)})):p.map(function(v){frappe.views.KanbanBoardCard(v,f.$kanban_cards)})}function A(){!frappe.model.can_write(n.state.doctype)||Sortable.create(f.$kanban_cards.get(0),{group:"cards",animation:150,dataIdAttr:"data-name",forceFallback:!0,onStart:function(){c.find(".kanban-card.add-card").fadeOut(200,function(){c.find(".kanban-cards").height("100vh")})},onEnd:function(h){c.find(".kanban-card.add-card").fadeIn(100),c.find(".kanban-cards").height("auto");let y={name:decodeURIComponent($(h.item).attr("data-name")),from_colname:$(h.from).parents(".kanban-column").attr("data-column-value"),to_colname:$(h.to).parents(".kanban-column").attr("data-column-value"),old_index:h.oldIndex,new_index:h.newIndex};n.dispatch("update_order_for_single_card",y)},onAdd:function(){}})}function U(){var h=f.$kanban_column,y=h.find(".add-card"),E=h.find(".new-card-area");if(!frappe.model.can_create(n.state.doctype)){y.remove(),E.remove();return}var v=E.find("textarea");E.hide(),y.on("click",function(){y.hide(),E.show(),v.focus()}),E.keydown(function(D){if(D.which==13&&(D.preventDefault(),!frappe.request.ajax_count)){D.preventDefault();var T=v.val();E.hide(),v.val(""),n.dispatch("add_card",{card_title:T,column_title:s.title}).then(()=>{y.show()})}}),v.on("blur",function(){$(this).val(""),y.show(),E.hide()})}function k(){if(!u.write){f.$kanban_column.find(".column-options").remove();return}f.$kanban_column.find(".column-options .dropdown-menu").on("click","[data-action]",function(){var h=$(this),y=h.data().action;if(y==="archive")n.dispatch("archive_column",s);else if(y==="indicator"){var E=h.data().indicator;n.dispatch("set_indicator",{column:s,color:E})}}),z(function(h){let y=`<li class="button-group">${h.map(E=>{let v=frappe.scrub(E,"-");return`<div data-action="indicator" data-indicator="${E}" class="btn btn-default btn-xs indicator-pill ${v}"></div>`}).join("")}</li>`;f.$kanban_column.find(".column-options .dropdown-menu").append(y)})}w()},frappe.views.KanbanBoardCard=function(s,c){var u={};function f(){!s||(p(),s.doctype!=="Organization Entry Records"&&V())}function p(){var k={name:s.name,title:frappe.utils.html2text(s.title),disable_click:s._disable_click?"disable-click":"",creation:s.creation,doc_content:w(s),image_url:cur_list.get_image_url(s),form_link:frappe.utils.get_form_link(s.doctype,s.name)};let h=`<div class="kanban-card-wrapper {{ disable_click }}" data-name="{{encodeURIComponent(name)}}">
                <div class="kanban-card content">
                    {% if(image_url) { %}
                    <div class="kanban-image">
                        <img  src="{{image_url}}" alt="{{title}}">
                    </div>
                    {% } %}
                    <div class="kanban-card-body">
                        <div class="kanban-title-area">
                            <a href="/app/standard-group-elements/{{ title }}">
                                <div class="kanban-card-title ellipsis" title="{{title}}">
                                    {{ title }}
                                </div>
                            </a>
                            <br>
                            <div class="kanban-card-doc text-muted">
                                {{ doc_content }}
                            </div>
                        </div>
                        <div class="kanban-card-meta">
                        </div>
                    </div>
                </div>
            </div>
            <style>
                .kanban-card-wrapper:hover {
                    box-shadow: var(--shadow-md);
                    text-decoration: none;
                }
            </style>
            `;s.doctype==="Organization Entry Records"?u.$card=$(frappe.render(h,k)).appendTo(c):u.$card=$(frappe.render_template("kanban_card",k)).appendTo(c),frappe.model.can_write(s.doctype)||u.$card.find(".kanban-card-body").css("cursor","default")}function w(k){var y,E;if(k.doctype==="Organization Entry Records"){var h=[];for(let v of cur_list.board.fields){if(v==="element")continue;let D=((y=frappe.meta.docfield_map[k.doctype])==null?void 0:y[v])||frappe.model.get_std_field(v),T=cur_list.board.show_labels?`<span>${__(D.label)}: </span>`:"",C=frappe.format(k.doc[v],D);if(v==="evaluation"){let se={"\u0627\u0644\u062A\u0632\u0627\u0645 \u0643\u0644\u064A":"#00E676","\u0627\u0644\u062A\u0632\u0627\u0645 \u062C\u0632\u0626\u064A":"#FFA500","\u0639\u062F\u0645 \u0627\u0644\u062A\u0632\u0627\u0645":"#FF0000","\u0644\u0627 \u064A\u0646\u0637\u0628\u0642":"#808080"};h.push(`
                        <hr/>
                        <div class="text-muted" style="overflow-wrap: break-word;">
                            ${T}
                        <svg width="17" height="17">
                            <circle cx="8" cy="8" r="7" fill="${se[C]}" />
                        </svg>
                            <span>${C}</span>
                        </div>
                    `)}else v==="recommendations"&&C?h.push(`
                        <hr/>
                        <div class="text-muted" style="overflow-wrap: break-word;">
                            ${T}
                            <span>${C}</span>
                        </div>
                    `):h.push(`
                            <div class="text-muted" style="overflow-wrap: break-word;">
                                ${T}
                                <span>${C}</span>
                            </div>
                        `)}}else{var h=[];for(let D of cur_list.board.fields){let T=((E=frappe.meta.docfield_map[k.doctype])==null?void 0:E[D])||frappe.model.get_std_field(D),C=cur_list.board.show_labels?`<span>${__(T.label)}: </span>`:"",se=frappe.format(k.doc[D],T);h.push(`
                        <div class="text-muted text-truncate">
                            ${C}
                            <span>${se}</span>
                        </div>
                    `)}}return h.join("")}function b(k){return k.tags?`<div class="kanban-tags">
					${cur_list.get_tags_html(k.tags,3,!0)}
				</div>`:""}function V(){let k=b(s);s.comment_count>0&&(k+=`<span class="list-comment-count small text-muted ">
					${frappe.utils.icon("es-line-chat-alt")}
					${s.comment_count}
				</span>`);let h=A();if(k+=`
				<span class="kanban-assignments"></span>
				${cur_list.get_like_html(s)}
			`,s.color&&frappe.ui.color.validate_hex(s.color)){let y=$("<div>");$("<div></div>").css({width:"30px",height:"4px",borderRadius:"2px",marginBottom:"8px",backgroundColor:s.color}).appendTo(y),u.$card.find(".kanban-card .kanban-title-area").prepend(y)}u.$card.find(".kanban-card-meta").empty().append(k).find(".kanban-assignments").append(h)}function A(){return frappe.avatar_group(s.assigned_list,3,{css_class:"avatar avatar-small",action_icon:"add",action:U})}function U(k){k.preventDefault(),k.stopPropagation(),u.assign_to=new frappe.ui.form.AssignToDialog({obj:u,method:"frappe.desk.form.assign_to.add",doctype:s.doctype,docname:s.name,callback:function(){let h=u.assign_to_dialog.get_values().assign_to;s.assigned_list=[...new Set(s.assigned_list.concat(h))],n.dispatch("update_card",s)}}),u.assign_to_dialog=u.assign_to.dialog,u.assign_to_dialog.show()}f()};function r(s,c,u){var f=s._assign?JSON.parse(s._assign):[],p=s._comment_count||0;return u&&(s=Object.assign({},s,u)),{doctype:c.doctype,name:s.name,title:s[c.card_meta.title_field.fieldname],creation:moment(s.creation).format("MMM DD, YYYY"),_liked_by:s._liked_by,image:s[cur_list.meta.image_field],tags:s._user_tags,column:s[c.board.field_name],assigned_list:s.assigned_list||f,comment_count:s.comment_count||p,color:s.color||null,doc:u||s}}function o(s){return s.map(function(c){return{title:c.column_name,status:c.status,order:c.order,indicator:c.indicator||"gray"}})}function i(s,c,u,f){return s.fields.forEach(function(p){if(p.fieldname===c.field_name&&p.fieldtype==="Select"){if(p.options||(p.options=""),f==="add")p.options.includes(u)||(p.options+=`
`+u);else if(f==="delete"){var w=p.options.split(`
`),b=w.indexOf(u);b!==-1&&w.splice(b,1),p.options=w.join(`
`)}}}),s}function a(s){return new Promise(function(c){frappe.model.with_doc("Customize Form","Customize Form",function(){var u=frappe.get_doc("Customize Form");u.doc_type=s,frappe.call({doc:u,method:"fetch_to_customize",callback:function(f){c(f.docs[0])}})})})}function l(s){if(!!s)return s.hide_success=!0,frappe.call({doc:s,method:"save_customization"})}function _(s){return frappe.call({method:"frappe.client.insert",args:{doc:s},callback:function(){frappe.model.clear_doc(s.doctype,s.name),frappe.show_alert({message:__("Saved"),indicator:"green"},1)}})}function m(s,c,u){var f,p={board_name:s,column_title:c};return u==="add"?f="add_column":(u==="archive"||u==="restore")&&(f="archive_restore_column",p.status=u==="archive"?"Archived":"Active"),frappe.call({method:e+f,args:p})}function d(s){return s.status!=="Archived"}function g(s,c){return s.filter(function(u){return u.column===c.title})}function N(s){return n.state.cards.find(function(c){return c.name===s})}function O(s){var c=n.state.cards;return c.forEach(function(u){s.forEach(function(f){f.name===u.name&&(u.column=f.column)})}),c}function z(s){frappe.model.with_doctype("Kanban Board Column",function(){var c=frappe.get_meta("Kanban Board Column"),u;c.fields.forEach(function(f){f.fieldname==="indicator"&&(u=f.options.split(`
`))}),u||(u=["green","blue","orange","gray"]),s(u)})}})();})();
/*!
 * vuex v4.0.2
 * (c) 2021 Evan You
 * @license MIT
 */
/*! #__NO_SIDE_EFFECTS__ */
//# sourceMappingURL=kanban_board.bundle.KCO6UUDJ.js.map
